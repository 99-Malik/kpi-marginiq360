'use client';

import React, { useState } from 'react'

import ChartCard from '@/components/LineChartCard/ChartCards';
import Pagination from '@/components/Pagination/BudgetPagination/page';
import BudgetModal from '@/components/Modal/BudgetForcasting/BudgetModal';
import AIForecastTab from '@/components/Tabs/BudgetForcasting/AIForcast';
import VarianceAnalysisTab from '@/components/Tabs/BudgetForcasting/VarianceAnalysis';
import BudgetPlanning from '@/components/Tabs/BudgetForcasting/BudgetPlanning';

// Define the interface for budget data
interface BudgetData {
    id: string;
    category: string;
    actual: string;
    difference: string;
    variance: string;
    status: string;
}

function Page() {
    const [menuOpen, setMenuOpen] = useState(false);
    const [isModalOpen, setIsModalOpen] = useState(false);
    const [modalMode, setModalMode] = useState<'create' | 'edit'>('create');
    const [editData, setEditData] = useState<BudgetData | null>(null);

    const handleLogoClick = () => {
        setMenuOpen(!menuOpen);
    };

    const handleCreateNewBudget = () => {
        setModalMode('create');
        setEditData(null);
        setIsModalOpen(true);
    };

    const handleEditBudget = (data: BudgetData) => {
        setModalMode('edit');
        setEditData(data);
        setIsModalOpen(true);
    };

    const handleCloseModal = () => {
        setIsModalOpen(false);
        setEditData(null);
    };

    const [activeTab, setActiveTab] = useState('Current Budget');

    const handleTabClick = (tab: string) => {
        setActiveTab(tab);
    };


    return (
       <>

                <main className="flex-1 overflow-auto px-2 pb-6 bg-white ">
                    {/* Header */}
                    <div className="mb-6">
                        <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 lg:gap-4">
                            {/* left: title + subtitle */}
                            <div className="min-w-0">
                                <h1 className="text-xl lg:text-2xl font-bold text-gray-900">Budget & Forecasting</h1>
                                <p className="text-gray-500 mt-2 sm:max-w-[60ch] md:text-xs lg:text-xs xl:text-base">
                                    Comprehensive performance insights and trends
                                </p>
                            </div>

                            {/* right: actions - buttons below on md, same row on lg */}
                            <div className="flex items-center lg:mt-6 xl:mt-4 gap-2 sm:gap-3 flex-wrap lg:flex-nowrap justify-end lg:justify-start">
                                {/* Button 1 */}
                                <button
                                    type="button"
                                    className="inline-flex h-8 items-center gap-2 rounded-lg border border-gray-200 bg-white cursor-pointer px-3 text-sm font-medium text-gray-700 hover:bg-gray-50"
                                >
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g clip-path="url(#clip0_3627_24002)">
                                            <path d="M2 14.667C2.00106 15.5507 2.35259 16.398 2.97748 17.0228C3.60237 17.6477 4.4496 17.9993 5.33333 18.0003H14.6667C15.5504 17.9993 16.3976 17.6477 17.0225 17.0228C17.6474 16.398 17.9989 15.5507 18 14.667V8.66699H2V14.667ZM13.3333 11.667C13.5311 11.667 13.7245 11.7256 13.8889 11.8355C14.0534 11.9454 14.1815 12.1016 14.2572 12.2843C14.3329 12.467 14.3527 12.6681 14.3141 12.8621C14.2755 13.0561 14.1803 13.2342 14.0404 13.3741C13.9006 13.514 13.7224 13.6092 13.5284 13.6478C13.3344 13.6864 13.1334 13.6666 12.9507 13.5909C12.7679 13.5152 12.6117 13.387 12.5019 13.2226C12.392 13.0581 12.3333 12.8648 12.3333 12.667C12.3333 12.4018 12.4387 12.1474 12.6262 11.9599C12.8138 11.7723 13.0681 11.667 13.3333 11.667ZM10 11.667C10.1978 11.667 10.3911 11.7256 10.5556 11.8355C10.72 11.9454 10.8482 12.1016 10.9239 12.2843C10.9996 12.467 11.0194 12.6681 10.9808 12.8621C10.9422 13.0561 10.847 13.2342 10.7071 13.3741C10.5673 13.514 10.3891 13.6092 10.1951 13.6478C10.0011 13.6864 9.80004 13.6666 9.61732 13.5909C9.43459 13.5152 9.27841 13.387 9.16853 13.2226C9.05865 13.0581 9 12.8648 9 12.667C9 12.4018 9.10536 12.1474 9.29289 11.9599C9.48043 11.7723 9.73478 11.667 10 11.667ZM6.66667 11.667C6.86445 11.667 7.05779 11.7256 7.22224 11.8355C7.38669 11.9454 7.51486 12.1016 7.59055 12.2843C7.66623 12.467 7.68604 12.6681 7.64745 12.8621C7.60887 13.0561 7.51363 13.2342 7.37377 13.3741C7.23392 13.514 7.05574 13.6092 6.86176 13.6478C6.66778 13.6864 6.46671 13.6666 6.28398 13.5909C6.10126 13.5152 5.94508 13.387 5.8352 13.2226C5.72532 13.0581 5.66667 12.8648 5.66667 12.667C5.66667 12.4018 5.77202 12.1474 5.95956 11.9599C6.1471 11.7723 6.40145 11.667 6.66667 11.667Z" fill="#727A90" />
                                            <path d="M14.6667 3.33333H14V2.66667C14 2.48986 13.9298 2.32029 13.8047 2.19526C13.6797 2.07024 13.5101 2 13.3333 2C13.1565 2 12.987 2.07024 12.8619 2.19526C12.7369 2.32029 12.6667 2.48986 12.6667 2.66667V3.33333H7.33333V2.66667C7.33333 2.48986 7.2631 2.32029 7.13807 2.19526C7.01305 2.07024 6.84348 2 6.66667 2C6.48986 2 6.32029 2.07024 6.19526 2.19526C6.07024 2.32029 6 2.48986 6 2.66667V3.33333H5.33333C4.4496 3.33439 3.60237 3.68592 2.97748 4.31081C2.35259 4.93571 2.00106 5.78294 2 6.66667L2 7.33333H18V6.66667C17.9989 5.78294 17.6474 4.93571 17.0225 4.31081C16.3976 3.68592 15.5504 3.33439 14.6667 3.33333Z" fill="#727A90" />
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_3627_24002">
                                                <rect width="16" height="16" fill="white" transform="translate(2 2)" />
                                            </clipPath>
                                        </defs>
                                    </svg>

                                    <span className="whitespace-nowrap text-xs text-[#727A90]">Last Year</span>
                                </button>

                                {/* Button 2 */}
                                <button
                                    type="button"
                                    className="inline-flex h-8 items-center gap-2 rounded-lg bg-[#F1E7F8] px-3 text-sm font-semibold text-primary cursor-pointer"
                                >
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g clip-path="url(#clip0_3627_20640)">
                                            <path d="M10.0008 3.33352C10.8851 3.33642 11.7601 3.51468 12.5751 3.85798C13.3901 4.20127 14.1289 4.7028 14.7488 5.33352H12.6675C12.4906 5.33352 12.3211 5.40376 12.196 5.52878C12.071 5.6538 12.0008 5.82337 12.0008 6.00018C12.0008 6.177 12.071 6.34656 12.196 6.47159C12.3211 6.59661 12.4906 6.66685 12.6675 6.66685H15.4295C15.7577 6.66667 16.0725 6.53619 16.3047 6.30405C16.5368 6.07192 16.6673 5.75714 16.6675 5.42885V2.66685C16.6675 2.49004 16.5972 2.32047 16.4722 2.19545C16.3472 2.07042 16.1776 2.00018 16.0008 2.00018C15.824 2.00018 15.6544 2.07042 15.5294 2.19545C15.4044 2.32047 15.3341 2.49004 15.3341 2.66685V4.05218C14.2322 3.05982 12.8758 2.39379 11.4169 2.12868C9.95786 1.86358 8.45387 2.00986 7.07331 2.55115C5.69275 3.09244 4.49013 4.00736 3.60013 5.19347C2.71012 6.37957 2.16788 7.79001 2.03412 9.26685C2.02551 9.35969 2.03633 9.4533 2.06589 9.54173C2.09546 9.63015 2.14312 9.71145 2.20584 9.78044C2.26855 9.84943 2.34496 9.9046 2.43017 9.94243C2.51539 9.98027 2.60755 9.99994 2.70079 10.0002C2.86384 10.0023 3.02181 9.94341 3.14376 9.83515C3.26571 9.72689 3.34286 9.57701 3.36012 9.41485C3.50853 7.75535 4.2721 6.21132 5.50084 5.08608C6.72958 3.96083 8.33466 3.33571 10.0008 3.33352Z" fill="#6E0AB8" />
                                            <path d="M17.3013 10.0001C17.1383 9.99798 16.9803 10.0568 16.8583 10.1651C16.7364 10.2734 16.6592 10.4232 16.642 10.5854C16.5318 11.8542 16.0599 13.0648 15.2824 14.0735C14.5049 15.0823 13.4544 15.8468 12.2554 16.2764C11.0565 16.7061 9.75945 16.7828 8.51822 16.4975C7.27699 16.2122 6.14365 15.5768 5.25265 14.6667H7.33398C7.5108 14.6667 7.68037 14.5965 7.80539 14.4715C7.93041 14.3464 8.00065 14.1769 8.00065 14.0001C8.00065 13.8233 7.93041 13.6537 7.80539 13.5287C7.68037 13.4036 7.5108 13.3334 7.33398 13.3334H4.57198C4.40938 13.3333 4.24836 13.3653 4.09812 13.4275C3.94788 13.4896 3.81137 13.5808 3.69639 13.6958C3.58141 13.8108 3.49023 13.9473 3.42804 14.0975C3.36586 14.2478 3.3339 14.4088 3.33398 14.5714V17.3334C3.33398 17.5102 3.40422 17.6798 3.52925 17.8048C3.65427 17.9298 3.82384 18.0001 4.00065 18.0001C4.17746 18.0001 4.34703 17.9298 4.47206 17.8048C4.59708 17.6798 4.66732 17.5102 4.66732 17.3334V15.9481C5.7692 16.9404 7.12559 17.6065 8.58459 17.8716C10.0436 18.1367 11.5476 17.9904 12.9281 17.4491C14.3087 16.9078 15.5113 15.9929 16.4013 14.8068C17.2913 13.6207 17.8336 12.2102 17.9673 10.7334C17.9759 10.6406 17.9651 10.5469 17.9355 10.4585C17.906 10.3701 17.8583 10.2888 17.7956 10.2198C17.7329 10.1508 17.6565 10.0956 17.5713 10.0578C17.4861 10.02 17.3939 10.0003 17.3007 10.0001H17.3013Z" fill="#6E0AB8" />
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_3627_20640">
                                                <rect width="16" height="16" fill="white" transform="translate(2 2)" />
                                            </clipPath>
                                        </defs>
                                    </svg>

                                    <span className="whitespace-nowrap text-xs text-primary">Refresh Data</span>
                                </button>

                                {/* Button 3 */}
                                <button
                                    type="button"
                                    className="inline-flex h-8 items-center gap-2 rounded-lg bg-[#F1E7F8] px-3 text-sm font-semibold text-primary cursor-pointer"
                                >
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g clip-path="url(#clip0_3627_24019)">
                                            <path d="M7.33852 1.71891L7.33386 12.0109C7.33386 12.1877 7.4041 12.3573 7.52912 12.4823C7.65414 12.6073 7.82371 12.6776 8.00052 12.6776C8.17734 12.6776 8.3469 12.6073 8.47193 12.4823C8.59695 12.3573 8.66719 12.1877 8.66719 12.0109L8.67186 1.73024L10.6132 3.67224C10.7382 3.79722 10.9077 3.86743 11.0845 3.86743C11.2613 3.86743 11.4308 3.79722 11.5559 3.67224C11.6808 3.54722 11.751 3.37768 11.751 3.20091C11.751 3.02413 11.6808 2.85459 11.5559 2.72957L9.41519 0.58624C9.22946 0.400387 9.00892 0.252953 8.76619 0.152364C8.52345 0.051774 8.26328 0 8.00052 0C7.73777 0 7.4776 0.051774 7.23486 0.152364C6.99213 0.252953 6.77159 0.400387 6.58586 0.58624L4.44519 2.72757C4.32021 2.85259 4.25 3.02213 4.25 3.19891C4.25 3.37568 4.32021 3.54522 4.44519 3.67024C4.57021 3.79522 4.73975 3.86543 4.91652 3.86543C5.0933 3.86543 5.26284 3.79522 5.38786 3.67024L7.33852 1.71891Z" fill="#6E0AB8" />
                                            <path d="M14.6667 11.3327V13.9993C14.6667 14.1762 14.5964 14.3457 14.4714 14.4707C14.3464 14.5958 14.1768 14.666 14 14.666H2C1.82319 14.666 1.65362 14.5958 1.5286 14.4707C1.40357 14.3457 1.33333 14.1762 1.33333 13.9993V11.3327C1.33333 11.1559 1.2631 10.9863 1.13807 10.8613C1.01305 10.7363 0.843478 10.666 0.666667 10.666C0.489856 10.666 0.320286 10.7363 0.195262 10.8613C0.0702379 10.9863 0 11.1559 0 11.3327L0 13.9993C0 14.5298 0.210714 15.0385 0.585786 15.4136C0.960859 15.7886 1.46957 15.9993 2 15.9993H14C14.5304 15.9993 15.0391 15.7886 15.4142 15.4136C15.7893 15.0385 16 14.5298 16 13.9993V11.3327C16 11.1559 15.9298 10.9863 15.8047 10.8613C15.6797 10.7363 15.5101 10.666 15.3333 10.666C15.1565 10.666 14.987 10.7363 14.8619 10.8613C14.7369 10.9863 14.6667 11.1559 14.6667 11.3327Z" fill="#6E0AB8" />
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_3627_24019">
                                                <rect width="16" height="16" fill="white" />
                                            </clipPath>
                                        </defs>
                                    </svg>

                                    <span className="whitespace-nowrap text-xs text-primary">Export Report</span>
                                </button>

                                <button
                                    type="button"
                                    className="inline-flex h-8 items-center gap-1 rounded-lg bg-primary px-3 text-sm text-white cursor-pointer"
                                    onClick={handleCreateNewBudget}
                                >
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g clip-path="url(#clip0_3627_931)">
                                            <path d="M17.3333 9.33333H10.6667V2.66667C10.6667 2.48986 10.5964 2.32029 10.4714 2.19526C10.3464 2.07024 10.1768 2 10 2V2C9.82319 2 9.65362 2.07024 9.5286 2.19526C9.40357 2.32029 9.33333 2.48986 9.33333 2.66667V9.33333H2.66667C2.48986 9.33333 2.32029 9.40357 2.19526 9.5286C2.07024 9.65362 2 9.82319 2 10V10C2 10.1768 2.07024 10.3464 2.19526 10.4714C2.32029 10.5964 2.48986 10.6667 2.66667 10.6667H9.33333V17.3333C9.33333 17.5101 9.40357 17.6797 9.5286 17.8047C9.65362 17.9298 9.82319 18 10 18C10.1768 18 10.3464 17.9298 10.4714 17.8047C10.5964 17.6797 10.6667 17.5101 10.6667 17.3333V10.6667H17.3333C17.5101 10.6667 17.6797 10.5964 17.8047 10.4714C17.9298 10.3464 18 10.1768 18 10C18 9.82319 17.9298 9.65362 17.8047 9.5286C17.6797 9.40357 17.5101 9.33333 17.3333 9.33333Z" fill="white" />
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_3627_931">
                                                <rect width="16" height="16" fill="white" transform="translate(2 2)" />
                                            </clipPath>
                                        </defs>
                                    </svg>

                                    <span className="whitespace-nowrap text-xs text-white">Create New Budget</span>
                                </button>
                            </div>

                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 mt-4 ">
                        <ChartCard
                            title="Total Budget"
                            value="46,420.00"
                            change="+10%"
                            amount="Up From Last Year"
                            color="green"
                            icon={
                                <svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect width="44" height="44" rx="22" fill="#E6F4F5" />
                                    <path d="M23.932 14C24.7454 14.0008 25.5253 14.3243 26.1005 14.8995C26.6757 15.4747 26.9992 16.2546 27 17.068C27 17.3332 27.1054 17.5876 27.2929 17.7751C27.4804 17.9626 27.7348 18.068 28 18.068C28.2652 18.068 28.5196 17.9626 28.7071 17.7751C28.8946 17.5876 29 17.3332 29 17.068V17C29 16.981 29 16.964 29 16.945C28.9666 15.6227 28.4181 14.3658 27.4714 13.4421C26.5247 12.5183 25.2547 12.0009 23.932 12H23V11C23 10.7348 22.8946 10.4804 22.7071 10.2929C22.5196 10.1054 22.2652 10 22 10C21.7348 10 21.4804 10.1054 21.2929 10.2929C21.1054 10.4804 21 10.7348 21 11V12H20.068C18.8653 12.0013 17.7023 12.4302 16.7868 13.2102C15.8713 13.9901 15.263 15.0702 15.0707 16.2574C14.8783 17.4446 15.1144 18.6615 15.7368 19.6907C16.3592 20.7198 17.3273 21.494 18.468 21.875L21 22.72V30H20.068C19.2546 29.9992 18.4747 29.6757 17.8995 29.1005C17.3243 28.5253 17.0008 27.7454 17 26.932C17 26.6668 16.8946 26.4124 16.7071 26.2249C16.5196 26.0374 16.2652 25.932 16 25.932C15.7348 25.932 15.4804 26.0374 15.2929 26.2249C15.1054 26.4124 15 26.6668 15 26.932V27C15 27.019 15 27.036 15 27.055C15.0334 28.3773 15.5819 29.6342 16.5286 30.5579C17.4753 31.4817 18.7453 31.9991 20.068 32H21V33C21 33.2652 21.1054 33.5196 21.2929 33.7071C21.4804 33.8946 21.7348 34 22 34C22.2652 34 22.5196 33.8946 22.7071 33.7071C22.8946 33.5196 23 33.2652 23 33V32H23.932C25.1347 31.9987 26.2977 31.5698 27.2132 30.7898C28.1287 30.0099 28.737 28.9298 28.9293 27.7426C29.1217 26.5554 28.8856 25.3385 28.2632 24.3093C27.6408 23.2802 26.6727 22.506 25.532 22.125L23 21.28V14H23.932ZM24.902 24.021C25.5934 24.2511 26.1804 24.7198 26.5577 25.3432C26.9351 25.9666 27.0782 26.704 26.9615 27.4233C26.8448 28.1426 26.4759 28.7969 25.9208 29.269C25.3657 29.7411 24.6607 30.0003 23.932 30H23V23.387L24.902 24.021ZM21 20.613L19.1 19.979C18.4087 19.7489 17.8219 19.2804 17.4445 18.6572C17.0672 18.034 16.9239 17.2969 17.0403 16.5777C17.1567 15.8585 17.5253 15.2042 18.08 14.7319C18.6348 14.2597 19.3395 14.0002 20.068 14H21V20.613Z" fill="#009499" />
                                </svg>



                            }
                        />
                        <ChartCard
                            title="Actual Spent"
                            value="15000"
                            change="+20%"
                            amount="Total Profit"
                            color="yellow"
                            icon={<svg width="45" height="44" viewBox="0 0 45 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="0.5" width="44" height="44" rx="22" fill="#FDF7E7" />
                                <path d="M24.432 14C25.2454 14.0008 26.0253 14.3243 26.6005 14.8995C27.1757 15.4747 27.4992 16.2546 27.5 17.068C27.5 17.3332 27.6054 17.5876 27.7929 17.7751C27.9804 17.9626 28.2348 18.068 28.5 18.068C28.7652 18.068 29.0196 17.9626 29.2071 17.7751C29.3946 17.5876 29.5 17.3332 29.5 17.068V17C29.5 16.981 29.5 16.964 29.5 16.945C29.4666 15.6227 28.9181 14.3658 27.9714 13.4421C27.0247 12.5183 25.7547 12.0009 24.432 12H23.5V11C23.5 10.7348 23.3946 10.4804 23.2071 10.2929C23.0196 10.1054 22.7652 10 22.5 10C22.2348 10 21.9804 10.1054 21.7929 10.2929C21.6054 10.4804 21.5 10.7348 21.5 11V12H20.568C19.3653 12.0013 18.2023 12.4302 17.2868 13.2102C16.3713 13.9901 15.763 15.0702 15.5707 16.2574C15.3783 17.4446 15.6144 18.6615 16.2368 19.6907C16.8592 20.7198 17.8273 21.494 18.968 21.875L21.5 22.72V30H20.568C19.7546 29.9992 18.9747 29.6757 18.3995 29.1005C17.8243 28.5253 17.5008 27.7454 17.5 26.932C17.5 26.6668 17.3946 26.4124 17.2071 26.2249C17.0196 26.0374 16.7652 25.932 16.5 25.932C16.2348 25.932 15.9804 26.0374 15.7929 26.2249C15.6054 26.4124 15.5 26.6668 15.5 26.932V27C15.5 27.019 15.5 27.036 15.5 27.055C15.5334 28.3773 16.0819 29.6342 17.0286 30.5579C17.9753 31.4817 19.2453 31.9991 20.568 32H21.5V33C21.5 33.2652 21.6054 33.5196 21.7929 33.7071C21.9804 33.8946 22.2348 34 22.5 34C22.7652 34 23.0196 33.8946 23.2071 33.7071C23.3946 33.5196 23.5 33.2652 23.5 33V32H24.432C25.6347 31.9987 26.7977 31.5698 27.7132 30.7898C28.6287 30.0099 29.237 28.9298 29.4293 27.7426C29.6217 26.5554 29.3856 25.3385 28.7632 24.3093C28.1408 23.2802 27.1727 22.506 26.032 22.125L23.5 21.28V14H24.432ZM25.402 24.021C26.0934 24.2511 26.6804 24.7198 27.0577 25.3432C27.4351 25.9666 27.5782 26.704 27.4615 27.4233C27.3448 28.1426 26.9759 28.7969 26.4208 29.269C25.8657 29.7411 25.1607 30.0003 24.432 30H23.5V23.387L25.402 24.021ZM21.5 20.613L19.6 19.979C18.9087 19.7489 18.3219 19.2804 17.9445 18.6572C17.5672 18.034 17.4239 17.2969 17.5403 16.5777C17.6567 15.8585 18.0253 15.2042 18.58 14.7319C19.1348 14.2597 19.8395 14.0002 20.568 14H21.5V20.613Z" fill="#E7AA0B" />
                            </svg>

                            }
                        />

                        <ChartCard
                            title="Budget Accuracy"
                            value="56,250.00"
                            change="Forcasting Confidence"
                            color="purple"
                            icon={<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect width="40" height="40" rx="20" fill="#FCEDF8" />
                                <path d="M11.2613 22.9054L14.7329 26.3771C15.2018 26.8458 15.8375 27.1091 16.5004 27.1091C17.1633 27.1091 17.7991 26.8458 18.2679 26.3771L28.9896 15.6554C29.1414 15.4983 29.2254 15.2878 29.2235 15.0693C29.2216 14.8508 29.134 14.6417 28.9795 14.4872C28.8249 14.3327 28.6159 14.2451 28.3974 14.2432C28.1789 14.2413 27.9684 14.3253 27.8113 14.4771L17.0896 25.1988C16.9333 25.355 16.7214 25.4427 16.5004 25.4427C16.2795 25.4427 16.0675 25.355 15.9113 25.1988L12.4396 21.7271C12.2824 21.5753 12.0719 21.4913 11.8534 21.4932C11.6349 21.4951 11.4259 21.5827 11.2714 21.7372C11.1169 21.8917 11.0293 22.1008 11.0274 22.3193C11.0255 22.5378 11.1095 22.7483 11.2613 22.9054Z" fill="#E44FBA" />
                            </svg>


                            }
                        />
                        <ChartCard
                            title="Variance"
                            value="-1000"
                            amount="-0.1%"
                            color="purpleDeep"
                            icon={<svg width="45" height="44" viewBox="0 0 45 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="0.5" width="44" height="44" rx="22" fill="#F4ECFA" />
                                <g clip-path="url(#clip0_26_60087)">
                                    <path d="M33.2608 23.9701L30.8158 24.6161C30.4576 24.7105 30.1227 24.8777 29.8318 25.1071L27.2378 23.5991C27.5853 22.5607 27.5853 21.4375 27.2378 20.3991L29.8318 18.8901C30.1227 19.1196 30.4576 19.2867 30.8158 19.3811C30.8158 19.3811 33.4328 20.0601 33.5158 20.0601C33.7552 20.0554 33.9848 19.9649 34.1632 19.8052C34.3415 19.6455 34.4566 19.4271 34.4876 19.1898C34.5185 18.9524 34.4634 18.7118 34.332 18.5117C34.2007 18.3115 34.0019 18.1652 33.7718 18.0991L31.3278 17.4521C31.1448 17.4035 30.9885 17.2843 30.8933 17.1207C30.7981 16.957 30.7716 16.7622 30.8198 16.5791L31.4668 14.1351C31.5004 14.0081 31.5087 13.8758 31.4912 13.7456C31.4736 13.6154 31.4306 13.4899 31.3646 13.3764C31.2986 13.2628 31.2109 13.1633 31.1064 13.0837C31.0019 13.004 30.8828 12.9457 30.7558 12.9121C30.6288 12.8785 30.4965 12.8702 30.3663 12.8878C30.2361 12.9053 30.1106 12.9483 29.9971 13.0143C29.8835 13.0803 29.7841 13.1681 29.7044 13.2726C29.6247 13.377 29.5664 13.4961 29.5328 13.6231L28.8868 16.0671C28.7911 16.4257 28.7703 16.8002 28.8258 17.1671L26.2258 18.6771C25.5109 17.8712 24.5548 17.3177 23.4998 17.0991V14.0991C23.8439 13.964 24.1567 13.7598 24.4188 13.4991L26.2068 11.7111C26.395 11.5236 26.501 11.269 26.5014 11.0034C26.5019 10.7377 26.3968 10.4828 26.2093 10.2946C26.0218 10.1064 25.7672 10.0005 25.5016 10C25.236 9.99953 24.981 10.1046 24.7928 10.2921L23.0048 12.0801C22.8704 12.2131 22.6889 12.2877 22.4998 12.2877C22.3107 12.2877 22.1293 12.2131 21.9948 12.0801L20.2068 10.2921C20.0182 10.11 19.7656 10.0092 19.5034 10.0114C19.2412 10.0137 18.9904 10.1189 18.805 10.3043C18.6196 10.4897 18.5144 10.7405 18.5122 11.0027C18.5099 11.2649 18.6107 11.5175 18.7928 11.7061L20.5808 13.4991C20.843 13.7598 21.1557 13.964 21.4998 14.0991V17.0991C20.444 17.3158 19.4864 17.8679 18.7698 18.6731L16.1698 17.1631C16.2253 16.7962 16.2045 16.4217 16.1088 16.0631L15.4668 13.6191C15.4332 13.4921 15.3749 13.373 15.2953 13.2686C15.2156 13.1641 15.1161 13.0763 15.0026 13.0103C14.889 12.9443 14.7636 12.9013 14.6334 12.8838C14.5032 12.8662 14.3708 12.8745 14.2438 12.9081C14.1168 12.9417 13.9977 13 13.8933 13.0797C13.7888 13.1593 13.7011 13.2588 13.635 13.3724C13.569 13.4859 13.526 13.6114 13.5085 13.7416C13.4909 13.8718 13.4992 14.0041 13.5328 14.1311L14.1798 16.5751C14.228 16.7582 14.2016 16.953 14.1063 17.1167C14.0111 17.2803 13.8548 17.3995 13.6718 17.4481L11.2278 18.0991C10.9938 18.1617 10.7905 18.3072 10.6556 18.5084C10.5208 18.7097 10.4635 18.953 10.4946 19.1933C10.5256 19.4335 10.6428 19.6543 10.8244 19.8147C11.006 19.975 11.2396 20.064 11.4818 20.0651C11.5668 20.0651 14.1818 19.3861 14.1818 19.3861C14.54 19.2917 14.875 19.1246 15.1658 18.8951L17.7618 20.3991C17.4144 21.4375 17.4144 22.5607 17.7618 23.5991L15.1678 25.1071C14.877 24.8777 14.542 24.7105 14.1838 24.6161L11.7388 23.9701C11.4898 23.9217 11.2317 23.9697 11.0168 24.1044C10.8019 24.2391 10.6462 24.4504 10.5812 24.6956C10.5163 24.9408 10.5469 25.2016 10.667 25.425C10.787 25.6485 10.9875 25.8179 11.2278 25.8991L13.6718 26.5461C13.8548 26.5947 14.0111 26.7139 14.1063 26.8776C14.2016 27.0412 14.228 27.236 14.1798 27.4191L13.5328 29.8631C13.4992 29.9901 13.4909 30.1225 13.5085 30.2527C13.526 30.3828 13.569 30.5083 13.635 30.6219C13.7011 30.7354 13.7888 30.8349 13.8933 30.9145C13.9977 30.9942 14.1168 31.0525 14.2438 31.0861C14.3708 31.1197 14.5032 31.128 14.6334 31.1105C14.7636 31.0929 14.889 31.0499 15.0026 30.9839C15.1161 30.9179 15.2156 30.8301 15.2953 30.7257C15.3749 30.6212 15.4332 30.5021 15.4668 30.3751L16.1128 27.9311C16.2085 27.5725 16.2293 27.1981 16.1738 26.8311L18.7738 25.3211C19.4888 26.1271 20.4449 26.6805 21.4998 26.8991V29.8991C21.1557 30.0343 20.843 30.2385 20.5808 30.4991L18.7928 32.2921C18.6107 32.4807 18.5099 32.7333 18.5122 32.9955C18.5144 33.2577 18.6196 33.5085 18.805 33.6939C18.9904 33.8793 19.2412 33.9845 19.5034 33.9868C19.7656 33.9891 20.0182 33.8883 20.2068 33.7061L21.9998 31.9181C22.1343 31.7851 22.3157 31.7105 22.5048 31.7105C22.6939 31.7105 22.8754 31.7851 23.0098 31.9181L24.7978 33.7061C24.9864 33.8883 25.239 33.9891 25.5012 33.9868C25.7634 33.9845 26.0142 33.8793 26.1996 33.6939C26.3851 33.5085 26.4902 33.2577 26.4925 32.9955C26.4948 32.7333 26.394 32.4807 26.2118 32.2921L24.4238 30.5041C24.1607 30.2411 23.8461 30.0351 23.4998 29.8991V26.8991C24.5556 26.6827 25.5131 26.131 26.2298 25.3261L28.8298 26.8361C28.7743 27.2031 28.7951 27.5775 28.8908 27.9361L29.5368 30.3801C29.6047 30.6366 29.7717 30.8556 30.0011 30.9889C30.2304 31.1222 30.5034 31.159 30.7598 31.0911C31.0163 31.0232 31.2353 30.8562 31.3686 30.6269C31.502 30.3975 31.5387 30.1246 31.4708 29.8681L30.8238 27.4241C30.7756 27.241 30.8021 27.0462 30.8973 26.8826C30.9925 26.7189 31.1488 26.5997 31.3318 26.5511L33.7758 25.9041C33.9056 25.8732 34.0278 25.8166 34.1354 25.7377C34.2429 25.6589 34.3336 25.5593 34.4021 25.4448C34.4706 25.3303 34.5155 25.2033 34.5341 25.0713C34.5528 24.9392 34.5448 24.8047 34.5108 24.6758C34.4767 24.5468 34.4171 24.426 34.3356 24.3204C34.2541 24.2148 34.1524 24.1266 34.0363 24.0609C33.9202 23.9953 33.7921 23.9535 33.6596 23.9381C33.5271 23.9227 33.3929 23.9339 33.2648 23.9711L33.2608 23.9701Z" fill="#6E0AB8" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_26_60087">
                                        <rect width="24" height="24" fill="white" transform="translate(10.5 10)" />
                                    </clipPath>
                                </defs>
                            </svg>

                            }
                        />
                    </div>
                    <div className="mb-6">
                        <div className="border-b border-gray-200">
                            <div className="flex gap-8 mt-12" role="tablist">
                                <button
                                    onClick={() => handleTabClick('Current Budget')}
                                    role="tab"
                                    aria-selected={activeTab === 'Current Budget'}
                                    className={`relative -mb-px pb-2 text-sm transition-colors
          ${activeTab === 'Current Budget'
                                            ? 'text-[#6E0AB8] font-semibold after:absolute after:left-0 after:bottom-[-1px] after:h-[2px] after:w-26 after:rounded-full after:bg-[#6E0AB8]'
                                            : 'text-gray-500 hover:text-gray-700'
                                        }`}
                                >
                                    Current Budget
                                </button>
                                <button
                                    onClick={() => handleTabClick('AI Forecast')}
                                    role="tab"
                                    aria-selected={activeTab === 'AI Forecast'}
                                    className={`relative -mb-px pb-2 text-sm transition-colors
          ${activeTab === 'AI Forecast'
                                            ? 'text-[#6E0AB8] font-semibold after:absolute after:left-0 after:bottom-[-1px] after:h-[2px] after:w-20 after:rounded-full after:bg-[#6E0AB8]'
                                            : 'text-gray-500 hover:text-gray-700'
                                        }`}
                                >
                                    AI Forecast
                                </button>

                                <button
                                    onClick={() => handleTabClick('Variance Analysis')}
                                    role="tab"
                                    aria-selected={activeTab === 'Variance Analysis'}
                                    className={`relative -mb-px pb-2 text-sm transition-colors
          ${activeTab === 'Variance Analysis'
                                            ? 'text-[#6E0AB8] font-semibold after:absolute after:left-0 after:bottom-[-1px] after:h-[2px] after:w-30 after:rounded-full after:bg-[#6E0AB8]'
                                            : 'text-gray-500 hover:text-gray-700'
                                        }`}
                                >
                                    Variance Analysis
                                </button>

                                <button
                                    onClick={() => handleTabClick('Budget Planning')}
                                    role="tab"
                                    aria-selected={activeTab === 'Budget Planning'}
                                    className={`relative -mb-px pb-2 text-sm transition-colors
          ${activeTab === 'Budget Planning'
                                            ? 'text-[#6E0AB8] font-semibold after:absolute after:left-0 after:bottom-[-1px] after:h-[2px] after:w-28 after:rounded-full after:bg-[#6E0AB8]'
                                            : 'text-gray-500 hover:text-gray-700'
                                        }`}
                                >
                                    Budget Planning
                                </button>
                            </div>
                        </div>
                    </div>

                    {activeTab === 'Current Budget' && (
                        <div>
                            <Pagination onEditBudget={handleEditBudget} />
                        </div>
                    )}
                    {activeTab === 'AI Forecast' && (
                        <div>
                            <AIForecastTab/>
                        </div>
                    )}
                    {activeTab === 'Variance Analysis' && (
                        <div>
                            <VarianceAnalysisTab/>
                        </div>
                    )}
                    {activeTab === 'Budget Planning' && (
                        <div>
                         <BudgetPlanning/>
                        </div>
                    )}
                  

                </main>
            
            <BudgetModal
                isOpen={isModalOpen}
                onClose={handleCloseModal}
                mode={modalMode}
                editData={editData || undefined}
            />
            </>
    )
}

export default Page